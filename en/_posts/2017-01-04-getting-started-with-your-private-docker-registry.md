---
layout: post
title:  "Getting started with your private Docker registry"
categories: docker
author: devatoria
lang: en
---

# Introduction

Docker Registry is a system that lets you store and distribute your Docker images. The mainly known Docker Registry is the official [Docker Hub](https://hub.docker.com/), where you can find official public images such as [Alpine](https://hub.docker.com/_/alpine/), [Golang](https://hub.docker.com/_/golang/) or [Debian](https://hub.docker.com/_/debian/).

Today, OVH allows you to use its own authenticated Docker Registry where you can **privately** store your Docker images. This is the best way to use your private images with our [Docker with Mesos/Marathon offer](https://www.runabove.com/docker-with-mesos-marathon.xml) without exposing them to everyone.

# Quickstart
## Create a registry account

First, order a [new registry](https://www.ovh.com/fr/order/express/#/new/express/resume?products=~(~(planCode~'registry-beta~configuration~(~)~option~(~)~quantity~1~productId~'registry))). The beta is totally free. Once your account is created, you can manage it with the [OVH Sunrise Manager](https://www.ovh.com/manager/sunrise/registry/#/registry).

![Accounts listing](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/accounts_listing.png)

## Create a user

A registry account can have multiple users. Different users can have different access rights on namespaces and images (as detailed further along). You can create a user in the manager "Users" tab.


![User creation](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/user_creation.png)

Be careful, the description of the user **IS NOT** its username. The username and the password will be randomly generated by our system. The description is only useful to easily retrieve an user from other tabs.

![User listing](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/user_listing.png)

## Create a namespace

Before pushing an image, you need to create a new namespace from the manager. To understand what a namespace is, let's detail the composition of a Docker image URI:

```
[registry_url/]namespace/image:tag
```

* The registry URL, if not specified, is the official Docker Hub ([docker.io](docker.io)). Otherwise, it indicates to Docker where to find the registry you want to contact.
* **The namespace is like a folder where you will put multiple images**
* The image is the name of your image
* The tag is like a version of your image (by default, `latest`) and allows you to easily deploy a precise version of an image

Namespaces can be created from the **Namespaces/Images** tab. You only have to provide a name which will be further used to push and pull images.

![Namespace creation](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/namespace_creation.png)

## Configure your namespace permissions

Once your namespace is created, you can select it from the dropdown list and inspect the images it contains, and manage its access permissions.

![Namespace details](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/namespace_details.png)

Just add the previously created user as admin (for example) and this user will be able to pull/push images on the entire namespace.

![User permissions add](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/user_permissions_add.png)

## Login into our registry

Now, you can login (authenticate) to our registry. It will generate a token used each time you will communicate with the registry and with our authentication system, so we will be able to retrieve the rights you have!

```bash
$ docker login registry.containers.ovh.net
Username: wsbq5k5ysqyt
Password:
Login Succeed
```

## Push your first image

You can finally push your first image into our registry! For this, you need to `tag` the image you want. Let's say that you want to push the official nginx image in our registry:

```bash
$ docker pull nginx # Pull official nginx image from Docker Hub
$ docker tag nginx registry.containers.ovh.net/devatoria/nginx # Rename image and add registry information
$ docker push registry.containers.ovh.net/devatoria/nginx # Push it!
```

After a few minutes (waiting for synchronization), you will be able to see your namespace images, tags and details. You can also manage permissions directly on images.

![Images listing](/kb/images/2017-01-04-how-to-start-with-your-private-docker-registry/images_listing.png)

By default, pushed images are **private**. It means that the image will be pullable/pushable only by users with authorizations on the image namespace. You can easily set your image as public (pullable by everyone, but pushable by authorized users only) by using the **visibility** switch.

# What's next?

You can know check out [how to use a private registry with our Docker on Mesos/Marathon offer](https://community.runabove.com/kb/en/docker/using-a-private-registry.html), to link your registry account to your Docker Stack.

That's all!
